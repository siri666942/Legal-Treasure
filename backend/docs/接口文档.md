# 后端接口文档（核心基础接口）

统一前缀：`/api/v1`

鉴权方式：Bearer Token
- Header：`Authorization: Bearer <access_token>`

## 0. 健康检查
### GET `/health`
响应：
```json
{"status":"ok"}
```

## 1. 用户注册
### POST `/api/v1/auth/register`
Body(JSON)：
```json
{
  "username": "alice",
  "password": "123456",
  "email": "alice@example.com"
}
```
响应(JSON)：
```json
{
  "id": 1,
  "username": "alice",
  "email": "alice@example.com"
}
```

## 2. 用户登录（JSON）
### POST `/api/v1/auth/login`
Body(JSON)：
```json
{
  "username": "alice",
  "password": "123456"
}
```
响应(JSON)：
```json
{
  "access_token": "xxxxx",
  "token_type": "bearer"
}
```

## 3. 用户登录（OAuth2 表单，Swagger 授权用）
### POST `/api/v1/auth/token`
Body(form)：
- username
- password

响应同上（TokenOut）。

## 4. 文件上传（需要登录）
### POST `/api/v1/files/upload`
Header：
- `Authorization: Bearer <token>`

Body(multipart/form-data)：
- file: 上传文件

响应(JSON)：
```json
{
  "id": 1,
  "original_filename": "a.pdf",
  "stored_filename": "uuid_a.pdf",
  "content_type": "application/pdf",
  "size": 12345,
  "path": ".\\\\uploads\\\\uuid_a.pdf",
  "created_at": "2026-01-20T12:00:00.000000"
}
```

## 5. 查询：我的上传文件列表（需要登录）
### GET `/api/v1/files`
Header：
- `Authorization: Bearer <token>`

响应：UploadedFileOut 数组。

## 6. 查询：我的合同列表（需要登录）
### GET `/api/v1/query/contracts`
Query：
- q：关键字（可选）
- status：状态过滤（可选）

Header：
- `Authorization: Bearer <token>`

响应：ContractOut 数组（初始可能为空）。

## 7. 查询：法条搜索（不需要登录）
### GET `/api/v1/query/laws`
Query：
- keyword：内容关键字（可选）
- law_name：法律名称过滤（可选）

响应：LawArticleOut 数组（默认最多 50 条）。

## Swagger 自动文档
启动服务后访问：
- `http://127.0.0.1:8000/docs`
- `http://127.0.0.1:8000/openapi.json`

