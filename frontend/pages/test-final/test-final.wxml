<!-- pages/test-final/test-final.wxml -->
<view class="container">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <text class="title">ğŸ§ª å·¥å…·å‡½æ•°å®Œæ•´æµ‹è¯•</text>
    <text class="subtitle">éªŒè¯æ‰€æœ‰å·¥å…·å‡½æ•°æ˜¯å¦æ­£å¸¸å·¥ä½œ</text>
  </view>

  <!-- è¿›åº¦ç»Ÿè®¡ -->
  <view class="stats">
    <view class="stat-item">
      <text class="stat-value">{{progress.completed}}/{{progress.total}}</text>
      <text class="stat-label">å®Œæˆ</text>
    </view>
    <view class="stat-item success">
      <text class="stat-value">{{progress.passed}}</text>
      <text class="stat-label">é€šè¿‡</text>
    </view>
    <view class="stat-item warning">
      <text class="stat-value">{{progress.failed}}</text>
      <text class="stat-label">å¤±è´¥</text>
    </view>
  </view>

  <!-- æ§åˆ¶æŒ‰é’® -->
  <view class="controls">
    <button 
      class="btn btn-primary {{running ? 'disabled' : ''}}" 
      bindtap="runAllTests"
      disabled="{{running}}"
    >
      {{running ? 'æµ‹è¯•ä¸­...' : 'è¿è¡Œæ‰€æœ‰æµ‹è¯•'}}
    </button>
    <button class="btn btn-secondary" bindtap="exportReport">å¯¼å‡ºæŠ¥å‘Š</button>
    <button class="btn btn-secondary" bindtap="clearLogs">æ¸…ç©ºæ—¥å¿—</button>
  </view>

  <!-- æµ‹è¯•ç»“æœåˆ—è¡¨ -->
  <scroll-view class="test-list" scroll-y="true">
    <view wx:for="{{testResults}}" wx:key="index" class="test-item test-{{item.status}}">
      <view class="test-info">
        <text class="test-name">{{item.name}}</text>
        <text class="test-status">{{item.status}}</text>
      </view>
      <view class="test-message" wx:if="{{item.message}}">
        <text>{{item.message}}</text>
      </view>
    </view>
  </scroll-view>

  <!-- æ—¥å¿—åŒºåŸŸ -->
  <view class="log-container">
    <view class="log-header">
      <text class="log-title">ğŸ“ æµ‹è¯•æ—¥å¿—</text>
      <text class="log-count">{{logs.length}} æ¡</text>
    </view>
    <scroll-view class="log-content" scroll-y="true">
      <view wx:for="{{logs}}" wx:key="index" class="log-item log-{{item.type}}">
        <text class="log-time">[{{item.time}}]</text>
        <text class="log-message">{{item.message}}</text>
      </view>
    </scroll-view>
  </view>
</view>