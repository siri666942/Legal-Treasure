<!-- pages/client-chat/client-chat.wxml -->
<!-- ç”¨æˆ·ç«¯æ²Ÿé€šé¡µé¢ -->
<view class="chat-page">
  <!-- æ¶ˆæ¯åˆ—è¡¨ -->
  <view class="message-list">
    <block wx:for="{{messageList}}" wx:key="id">
      <view 
        class="message-item {{item.isTop ? 'top-item' : ''}}" 
        bindtap="enterChat" 
        data-id="{{item.id}}" 
        data-type="{{item.type}}" 
        data-name="{{item.name}}"
      >
        <view class="avatar-wrapper">
          <text class="avatar {{item.type}}">{{item.avatar}}</text>
          <view wx:if="{{item.unreadCount > 0}}" class="unread-dot"></view>
        </view>
        
        <view class="message-content">
          <view class="message-header">
            <view class="name-wrapper">
              <text class="contact-name">{{item.name}}</text>
              <text wx:if="{{item.caseName}}" class="case-tag">{{item.caseName}}</text>
            </view>
            <text class="message-time">{{item.time}}</text>
          </view>
          
          <view class="message-preview">
            <text class="last-message">{{item.lastMessage}}</text>
            <view wx:if="{{item.unreadCount > 0}}" class="unread-badge">
              <text>{{item.unreadCount}}</text>
            </view>
          </view>
        </view>
      </view>
    </block>
  </view>
  
  <!-- ç©ºçŠ¶æ€æç¤º -->
  <view wx:if="{{messageList.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ’¬</view>
    <text class="empty-title">æš‚æ— æ¶ˆæ¯</text>
    <text class="empty-desc">æ‚¨è¿˜æ²¡æœ‰ä»»ä½•èŠå¤©è®°å½•</text>
  </view>
  
  <!-- åº•éƒ¨å¯¼èˆª -->
  <view class="custom-tabbar">
    <block wx:for="{{tabList}}" wx:key="id">
      <view 
        class="tab-item {{item.active ? 'active' : ''}}" 
        bindtap="switchTab" 
        data-id="{{item.id}}"
      >
        <view class="tab-icon {{item.icon}}"></view>
        <text class="tab-text">{{item.name}}</text>
      </view>
    </block>
  </view>
</view>