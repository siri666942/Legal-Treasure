<!-- subpackages/lawyer/pages/history-case-detail/history-case-detail.wxml -->
<view class="container">
  <!-- æ¡ˆä»¶æ ‡é¢˜å’Œæ“ä½œ -->
  <view class="case-header">
    <view class="case-title-row">
      <text class="case-title">{{caseInfo.caseTitle}}</text>
      <text class="case-status status-completed">{{caseInfo.status}}</text>
    </view>
    <view class="case-no-row">
      <text class="case-no">{{caseInfo.caseNo}}</text>
      <text class="copy-icon" bindtap="copyCaseNo">ğŸ“‹</text>
    </view>
  </view>

  <!-- åŠç†å¾‹å¸ˆ -->
  <view class="card">
    <view class="card-header">
      <view class="card-title-with-icon">
        <view class="card-icon">
          <text class="icon">âš–ï¸</text>
        </view>
        <text class="card-title">åŠç†å¾‹å¸ˆ</text>
      </view>
    </view>
    <view class="card-content">
      <view class="lawyer-info">
        <view class="lawyer-avatar-container">
          <view class="lawyer-avatar">
            <text>{{lawyerInfo.avatar}}</text>
          </view>
          <view class="lawyer-basic">
            <text class="lawyer-name">{{lawyerInfo.name}}</text>
            <text class="lawyer-firm">{{lawyerInfo.lawFirm}}</text>
          </view>
        </view>
        <view class="lawyer-details">
          <view class="detail-item">
            <text class="detail-label">æ‰§ä¸šè¯å·ï¼š</text>
            <text class="detail-value">{{lawyerInfo.licenseNo}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">æ‰§ä¸šå¹´é™ï¼š</text>
            <text class="detail-value">{{lawyerInfo.experience}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">ä¸“ä¸šé¢†åŸŸï¼š</text>
            <text class="detail-value">{{lawyerInfo.specialty}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">è”ç³»æ–¹å¼ï¼š</text>
            <text class="detail-value contact-phone" bindtap="callLawyer">{{lawyerInfo.phone}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">ç”µå­é‚®ç®±ï¼š</text>
            <text class="detail-value">{{lawyerInfo.email}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ¡ˆä»¶åŸºæœ¬ä¿¡æ¯ -->
  <view class="card">
    <view class="card-header">
      <view class="card-title-with-icon">
        <view class="card-icon">
          <text class="icon">ğŸ“‹</text>
        </view>
        <text class="card-title">æ¡ˆä»¶åŸºæœ¬ä¿¡æ¯</text>
      </view>
    </view>
    <view class="card-content">
      <view class="info-grid">
        <view class="info-item">
          <text class="label">æ¡ˆä»¶æ€§è´¨ï¼š</text>
          <text class="value">{{caseInfo.caseType}}</text>
        </view>
        <view class="info-item">
          <text class="label">å®¡ç†æ³•é™¢ï¼š</text>
          <text class="value">{{caseInfo.court}}</text>
        </view>
        <view class="info-item">
          <text class="label">æ‰¿åŠæ³•å®˜ï¼š</text>
          <text class="value">{{caseInfo.judge}}</text>
        </view>
        <view class="info-item">
          <text class="label">ç«‹æ¡ˆæ—¶é—´ï¼š</text>
          <text class="value">{{caseInfo.filingDate}}</text>
        </view>
        <view class="info-item">
          <text class="label">ç»“æ¡ˆæ—¶é—´ï¼š</text>
          <text class="value">{{caseInfo.closeDate}}</text>
        </view>
        <view class="info-item">
          <text class="label">æ ‡çš„é‡‘é¢ï¼š</text>
          <text class="value">{{caseInfo.amount}}</text>
        </view>
        <view class="info-item">
          <text class="label">é€‚ç”¨æ³•å¾‹ï¼š</text>
          <text class="value">{{caseInfo.applicableLaw}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ¡ˆä»¶æ—¶é—´è½´ -->
  <view class="card">
    <view class="card-header">
      <view class="card-title-with-icon">
        <view class="card-icon">
          <text class="icon">ğŸ“…</text>
        </view>
        <text class="card-title">æ¡ˆä»¶æ—¶é—´è½´</text>
      </view>
    </view>
    <view class="card-content">
      <view class="timeline">
        <view class="timeline-item" wx:for="{{timeline}}" wx:key="index">
          <view class="timeline-dot {{index === timeline.length - 1 ? 'completed-last' : 'completed'}}"></view>
          <view class="timeline-content">
            <view class="timeline-date">{{item.date}}</view>
            <view class="timeline-event">{{item.event}}</view>
            <view class="timeline-desc" wx:if="{{item.description}}">{{item.description}}</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å…³è”å·å®—ï¼ˆæ— å›¾æ ‡ï¼Œå³ä¾§â€œâ‹¯â€èœå•ï¼‰ -->
  <view class="card">
    <view class="card-header">
      <view class="card-title-with-icon">
        <view class="card-icon">
          <text class="icon">ğŸ“</text>
        </view>
        <text class="card-title">å…³è”å·å®—</text>
      </view>
    </view>
    <view class="card-content">
      <view class="documents-grid">
        <view class="document-item" wx:for="{{documents}}" wx:key="index">
          <!-- æ— å›¾æ ‡ï¼Œä»…æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯ -->
          <view class="document-info">
            <text class="document-name">{{item.name}}</text>
            <text class="document-meta">{{item.type}} â€¢ {{item.size}} â€¢ {{item.date}}</text>
            <text class="document-uploader">ä¸Šä¼ ï¼š{{item.uploadedBy}}</text>
          </view>
          <!-- å³ä¾§â€œâ‹¯â€èœå• -->
          <view class="document-more" bindtap="showFileActions" data-index="{{index}}">
            <text>â‹¯</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ¡ˆä»¶ç›¸å…³æ–¹ï¼ˆä»…å±•ç¤ºï¼Œæ— ä»»ä½•æ“ä½œæŒ‰é’®ï¼‰ -->
  <view class="card">
    <view class="card-header">
      <view class="card-title-with-icon">
        <view class="card-icon">
          <text class="icon">ğŸ‘¥</text>
        </view>
        <text class="card-title">æ¡ˆä»¶ç›¸å…³æ–¹</text>
      </view>
    </view>
    <view class="card-content">
      <view class="parties-container">
        <view class="party-card" wx:for="{{parties}}" wx:key="id">
          <view class="party-header">
            <view class="party-avatar {{item.roleClass}}">
              <text>{{item.id}}</text>
            </view>
            <view class="party-title">
              <text class="party-name">{{item.name}}</text>
              <text class="party-type">{{item.type}}</text>
            </view>
          </view>
          <view class="party-details">
            <text class="party-role">{{item.role}}</text>
            <text class="party-contact" wx:if="{{item.contact}}">{{item.contact}}</text>
            <text class="party-address" wx:if="{{item.address}}">{{item.address}}</text>
          </view>
          <!-- å·²ç§»é™¤ï¼šè”ç³»æŒ‰é’® -->
        </view>
      </view>
    </view>
  </view>

  <!-- åˆ¤å†³ç»“æœ -->
  <view class="card">
    <view class="card-header">
      <view class="card-title-with-icon">
        <view class="card-icon">
          <text class="icon">âš–ï¸</text>
        </view>
        <text class="card-title">åˆ¤å†³ç»“æœ</text>
      </view>
    </view>
    <view class="card-content">
      <view class="judgment-result">
        <view class="judgment-header">
          <text class="judgment-title">{{judgment.result}}</text>
          <text class="judgment-date">{{judgment.decisionDate}}</text>
        </view>
        
        <view class="judgment-summary">
          <text class="summary-text">{{judgment.summary}}</text>
        </view>
        
        <view class="judgment-details" wx:if="{{showFullJudgment}}">
          <view class="details-title">åˆ¤å†³å†…å®¹ï¼š</view>
          <view class="details-list">
            <view class="detail-item" wx:for="{{judgment.details}}" wx:key="index">
              <text class="detail-text">{{item}}</text>
            </view>
          </view>
          
          <view class="judgment-meta">
            <view class="meta-item">
              <text class="meta-label">ç”Ÿæ•ˆæ—¥æœŸï¼š</text>
              <text class="meta-value">{{judgment.effectiveDate}}</text>
            </view>
            <view class="meta-item">
              <text class="meta-label">åˆè®®åº­ï¼š</text>
              <text class="meta-value">{{judgment.judgePanel}}</text>
            </view>
            <view class="meta-item">
              <text class="meta-label">æ³•é™¢å°ç« ï¼š</text>
              <text class="meta-value">{{judgment.courtSeal}}</text>
            </view>
          </view>
        </view>
        
        <view class="judgment-toggle" bindtap="toggleJudgment">
          <text class="toggle-text">{{showFullJudgment ? 'æ”¶èµ·è¯¦æƒ…' : 'æŸ¥çœ‹å®Œæ•´åˆ¤å†³'}}</text>
          <text class="toggle-icon">{{showFullJudgment ? 'â–²' : 'â–¼'}}</text>
        </view>
      </view>
    </view>
  </view>
</view>