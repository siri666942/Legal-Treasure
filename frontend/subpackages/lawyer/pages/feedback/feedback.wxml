<!-- subpackages/lawyer/pages/help/feedback.wxml -->
<view class="feedback-page">
  <!-- å¸®åŠ©ä¸­å¿ƒ -->
  <view class="help-center">
    <view class="section-header">
      <text class="section-title">å¸¸è§é—®é¢˜</text>
    </view>
    
    <view class="question-list">
      <view class="question-item" wx:for="{{faqList}}" wx:key="id" bindtap="toggleQuestion" data-id="{{item.id}}">
        <view class="question-header">
          <text class="question-text">{{item.question}}</text>
          <text class="question-icon">{{item.expanded ? 'âˆ’' : '+'}}</text>
        </view>
        <view class="answer-content {{item.expanded ? 'expanded' : ''}}">
          <text class="answer-text">{{item.answer}}</text>
        </view>
      </view>
    </view>
    
    <!-- è·å¾—æ›´å¤šå¸®åŠ©æŒ‰é’®ï¼ˆè“è‰²ï¼Œä¸åé¦ˆç±»å‹æ¿€æ´»çŠ¶æ€ä¸€è‡´ï¼‰ -->
    <view class="help-links">
      <view class="type-btn active" bindtap="goToCommunication">
        <text>è·å¾—æ›´å¤šå¸®åŠ©</text>
      </view>
    </view>
  </view>

  <!-- æ„è§åé¦ˆï¼ˆä¿æŒä¸å˜ï¼‰ -->
  <view class="feedback-section">
    <view class="section-header">
      <text class="section-title">æ„è§åé¦ˆ</text>
    </view>
    
    <view class="feedback-form">
      <!-- åé¦ˆç±»å‹ -->
      <view class="form-group">
        <text class="form-label">åé¦ˆç±»å‹</text>
        <view class="type-buttons">
          <view 
            class="type-btn {{feedback.type === 1 ? 'active' : ''}}" 
            bindtap="setFeedbackType" 
            data-type="1"
          >
            åŠŸèƒ½å»ºè®®
          </view>
          <view 
            class="type-btn {{feedback.type === 2 ? 'active' : ''}}" 
            bindtap="setFeedbackType" 
            data-type="2"
          >
            ä½¿ç”¨é—®é¢˜
          </view>
          <view 
            class="type-btn {{feedback.type === 3 ? 'active' : ''}}" 
            bindtap="setFeedbackType" 
            data-type="3"
          >
            æŠ•è¯‰ä¸¾æŠ¥
          </view>
        </view>
        <view class="type-buttons">
          <view 
            class="type-btn {{feedback.type === 4 ? 'active' : ''}}" 
            bindtap="setFeedbackType" 
            data-type="4"
          >
            åˆä½œå’¨è¯¢
          </view>
          <view 
            class="type-btn {{feedback.type === 5 ? 'active' : ''}}" 
            bindtap="setFeedbackType" 
            data-type="5"
          >
            è®¤è¯é—®é¢˜
          </view>
        </view>
      </view>
      
      <!-- åé¦ˆå†…å®¹ -->
      <view class="form-group">
        <text class="form-label">åé¦ˆå†…å®¹</text>
        <textarea 
          class="feedback-input" 
          placeholder="è¯·è¯¦ç»†æè¿°æ‚¨çš„é—®é¢˜æˆ–å»ºè®®ï¼ˆ10-500å­—ï¼‰"
          maxlength="500"
          bindinput="onContentInput"
          value="{{feedback.content}}"
        />
        <view class="word-count">{{contentLength}}/500</view>
      </view>
      
      <!-- è”ç³»æ–¹å¼ -->
      <view class="form-group">
        <text class="form-label">è”ç³»æ–¹å¼</text>
        <input 
          class="contact-input" 
          type="text" 
          placeholder="æ‰‹æœºå·/é‚®ç®±ï¼ˆé€‰å¡«ï¼‰"
          bindinput="onContactInput"
          value="{{feedback.contact}}"
        />
      </view>
      
      <!-- å›¾ç‰‡ä¸Šä¼  -->
      <view class="form-group">
        <text class="form-label">ç›¸å…³æˆªå›¾ï¼ˆé€‰å¡«ï¼‰</text>
        <view class="image-upload">
          <view class="image-list">
            <view class="image-item" wx:for="{{feedback.images}}" wx:key="index">
              <image class="uploaded-image" src="{{item}}" mode="aspectFill"></image>
              <view class="delete-btn" bindtap="deleteImage" data-index="{{index}}">Ã—</view>
            </view>
            <view 
              class="upload-btn {{feedback.images.length >= 3 ? 'disabled' : ''}}" 
              bindtap="chooseImage"
              wx:if="{{feedback.images.length < 3}}"
            >
              <text class="upload-icon">+</text>
              <text class="upload-text">æ·»åŠ å›¾ç‰‡</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- æäº¤æŒ‰é’® -->
      <view class="submit-section">
        <button 
          class="submit-btn" 
          bindtap="submitFeedback"
          disabled="{{!canSubmit || isSubmitting}}"
        >
          {{isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤åé¦ˆ'}}
        </button>
      </view>
    </view>
  </view>

  <!-- è”ç³»æˆ‘ä»¬ï¼ˆä¿æŒä¸å˜ï¼‰ -->
  <view class="contact-section">
    <view class="section-header">
      <text class="section-title">è”ç³»æˆ‘ä»¬</text>
    </view>
    
    <view class="contact-list">
      <view class="contact-item" bindtap="callCustomerService">
        <text class="contact-icon">ğŸ“</text>
        <text class="contact-label">å®¢æœçƒ­çº¿</text>
        <text class="contact-value">{{lawyerContact.phone}}</text>
      </view>
      <view class="contact-item" bindtap="copyWechat">
        <text class="contact-icon">ğŸ’¬</text>
        <text class="contact-label">å®˜æ–¹å¾®ä¿¡</text>
        <text class="contact-value">{{lawyerContact.wechat}}</text>
      </view>
      <view class="contact-item" bindtap="copyEmail">
        <text class="contact-icon">ğŸ“§</text>
        <text class="contact-label">å®˜æ–¹é‚®ç®±</text>
        <text class="contact-value">{{lawyerContact.email}}</text>
      </view>
      <view class="contact-item" bindtap="viewWorkingHours">
        <text class="contact-icon">â°</text>
        <text class="contact-label">æœåŠ¡æ—¶é—´</text>
        <text class="contact-value">{{lawyerContact.time}}</text>
      </view>
    </view>
  </view>
</view>